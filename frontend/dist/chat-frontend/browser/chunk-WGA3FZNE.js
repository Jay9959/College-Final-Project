import{a as Ze,b as et,e as tt,j as nt}from"./chunk-HL3PVTPL.js";import{$ as We,Ca as D,Da as Ge,E as oe,F as u,G as $,M as k,O as f,P as N,Q as a,R as l,S,T as ae,U as ce,V as I,W as w,X as m,Y as Fe,Z as He,_ as ze,a as Ie,aa as je,b as Le,ba as g,ca as P,d as Nt,da as Y,e as V,ea as xe,fa as be,g as Ve,ga as ve,ia as Ke,m as se,p as qe,qa as $e,r as De,ra as Ye,sa as Qe,ta as Je,v as y,w as x,x as B,y as q,za as Xe}from"./chunk-TEBBNW7E.js";var C=Object.create(null);C.open="0";C.close="1";C.ping="2";C.pong="3";C.message="4";C.upgrade="5";C.noop="6";var Q=Object.create(null);Object.keys(C).forEach(i=>{Q[C[i]]=i});var J={type:"error",data:"parser error"};var st=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ot=typeof ArrayBuffer=="function",at=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,X=({type:i,data:t},e,n)=>st&&t instanceof Blob?e?n(t):it(t,n):ot&&(t instanceof ArrayBuffer||at(t))?e?n(t):it(new Blob([t]),n):n(C[i]+(t||"")),it=(i,t)=>{let e=new FileReader;return e.onload=function(){let n=e.result.split(",")[1];t("b"+(n||""))},e.readAsDataURL(i)};function rt(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var we;function ct(i,t){if(st&&i.data instanceof Blob)return i.data.arrayBuffer().then(rt).then(t);if(ot&&(i.data instanceof ArrayBuffer||at(i.data)))return t(rt(i.data));X(i,!1,e=>{we||(we=new TextEncoder),t(we.encode(e))})}var ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<ht.length;i++)G[ht.charCodeAt(i)]=i;var lt=i=>{let t=i.length*.75,e=i.length,n,r=0,s,o,c,p;i[i.length-1]==="="&&(t--,i[i.length-2]==="="&&t--);let E=new ArrayBuffer(t),v=new Uint8Array(E);for(n=0;n<e;n+=4)s=G[i.charCodeAt(n)],o=G[i.charCodeAt(n+1)],c=G[i.charCodeAt(n+2)],p=G[i.charCodeAt(n+3)],v[r++]=s<<2|o>>4,v[r++]=(o&15)<<4|c>>2,v[r++]=(c&3)<<6|p&63;return E};var It=typeof ArrayBuffer=="function",Z=(i,t)=>{if(typeof i!="string")return{type:"message",data:ut(i,t)};let e=i.charAt(0);return e==="b"?{type:"message",data:Lt(i.substring(1),t)}:Q[e]?i.length>1?{type:Q[e],data:i.substring(1)}:{type:Q[e]}:J},Lt=(i,t)=>{if(It){let e=lt(i);return ut(e,t)}else return{base64:!0,data:i}},ut=(i,t)=>{switch(t){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}};var pt="",dt=(i,t)=>{let e=i.length,n=new Array(e),r=0;i.forEach((s,o)=>{X(s,!1,c=>{n[o]=c,++r===e&&t(n.join(pt))})})},ft=(i,t)=>{let e=i.split(pt),n=[];for(let r=0;r<e.length;r++){let s=Z(e[r],t);if(n.push(s),s.type==="error")break}return n};function mt(){return new TransformStream({transform(i,t){ct(i,e=>{let n=e.length,r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);let s=new DataView(r.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{r=new Uint8Array(9);let s=new DataView(r.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}i.data&&typeof i.data!="string"&&(r[0]|=128),t.enqueue(r),t.enqueue(e)})}})}var Ce;function he(i){return i.reduce((t,e)=>t+e.length,0)}function le(i,t){if(i[0].length===t)return i.shift();let e=new Uint8Array(t),n=0;for(let r=0;r<t;r++)e[r]=i[0][n++],n===i[0].length&&(i.shift(),n=0);return i.length&&n<i[0].length&&(i[0]=i[0].slice(n)),e}function gt(i,t){Ce||(Ce=new TextDecoder);let e=[],n=0,r=-1,s=!1;return new TransformStream({transform(o,c){for(e.push(o);;){if(n===0){if(he(e)<1)break;let p=le(e,1);s=(p[0]&128)===128,r=p[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(he(e)<2)break;let p=le(e,2);r=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),n=3}else if(n===2){if(he(e)<8)break;let p=le(e,8),E=new DataView(p.buffer,p.byteOffset,p.length),v=E.getUint32(0);if(v>Math.pow(2,21)-1){c.enqueue(J);break}r=v*Math.pow(2,32)+E.getUint32(4),n=3}else{if(he(e)<r)break;let p=le(e,r);c.enqueue(Z(s?p:Ce.decode(p),t)),n=0}if(r===0||r>i){c.enqueue(J);break}}}})}var ke=4;function d(i){if(i)return Vt(i)}function Vt(i){for(var t in d.prototype)i[t]=d.prototype[t];return i}d.prototype.on=d.prototype.addEventListener=function(i,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(t),this};d.prototype.once=function(i,t){function e(){this.off(i,e),t.apply(this,arguments)}return e.fn=t,this.on(i,e),this};d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(i,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var n,r=0;r<e.length;r++)if(n=e[r],n===t||n.fn===t){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+i],this};d.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+i],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){e=e.slice(0);for(var n=0,r=e.length;n<r;++n)e[n].apply(this,t)}return this};d.prototype.emitReserved=d.prototype.emit;d.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};d.prototype.hasListeners=function(i){return!!this.listeners(i).length};var T=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),_=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),_t="arraybuffer";function ue(i,...t){return t.reduce((e,n)=>(i.hasOwnProperty(n)&&(e[n]=i[n]),e),{})}var qt=_.setTimeout,Dt=_.clearTimeout;function O(i,t){t.useNativeTimers?(i.setTimeoutFn=qt.bind(_),i.clearTimeoutFn=Dt.bind(_)):(i.setTimeoutFn=_.setTimeout.bind(_),i.clearTimeoutFn=_.clearTimeout.bind(_))}var Ft=1.33;function yt(i){return typeof i=="string"?Ht(i):Math.ceil((i.byteLength||i.size)*Ft)}function Ht(i){let t=0,e=0;for(let n=0,r=i.length;n<r;n++)t=i.charCodeAt(n),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(n++,e+=4);return e}function pe(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function xt(i){let t="";for(let e in i)i.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return t}function bt(i){let t={},e=i.split("&");for(let n=0,r=e.length;n<r;n++){let s=e[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}var de=class extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}},A=class extends d{constructor(t){super(),this.writable=!1,O(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,e,n){return super.emitReserved("error",new de(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=Z(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let e=xt(t);return e.length?"?"+e:""}};var ee=class extends A{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||e()})),this.writable||(n++,this.once("drain",function(){--n||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ft(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,dt(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=pe()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(t,e)}};var vt=!1;try{vt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var wt=vt;function zt(){}var Ee=class extends ee{constructor(t){if(super(t),typeof location<"u"){let e=location.protocol==="https:",n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,e){let n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,n)=>{this.onError("xhr poll error",e,n)}),this.pollXhr=t}},fe=(()=>{class i extends d{constructor(e,n,r){super(),this.createRequest=e,O(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;let n=ue(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zt,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ct);else if(typeof addEventListener=="function"){let i="onpagehide"in _?"pagehide":"unload";addEventListener(i,Ct,!1)}}function Ct(){for(let i in fe.requests)fe.requests.hasOwnProperty(i)&&fe.requests[i].abort()}var Wt=function(){let i=kt({xdomain:!1});return i&&i.responseType!==null}(),R=class extends Ee{constructor(t){super(t);let e=t&&t.forceBase64;this.supportsBinary=Wt&&!e}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fe(kt,this.uri(),t)}};function kt(i){let t=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||wt))return new XMLHttpRequest}catch{}if(!t)try{return new _[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var Et=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Te=class extends A{get name(){return"websocket"}doOpen(){let t=this.uri(),e=this.opts.protocols,n=Et?{}:ue(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,e,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],r=e===t.length-1;X(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}r&&T(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=pe()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}},Se=_.WebSocket||_.MozWebSocket,M=class extends Te{createSocket(t,e,n){return Et?new Se(t,e,n):e?new Se(t,e):new Se(t)}doWrite(t,e){this.ws.send(e)}};var F=class extends A{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{let e=gt(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(e).getReader(),r=mt();r.readable.pipeTo(t.writable),this._writer=r.writable.getWriter();let s=()=>{n.read().then(({done:c,value:p})=>{c||(this.onPacket(p),s())}).catch(c=>{})};s();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let n=t[e],r=e===t.length-1;this._writer.write(n).then(()=>{r&&T(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}};var Oe={websocket:M,webtransport:F,polling:R};var jt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Kt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function H(i){if(i.length>8e3)throw"URI too long";let t=i,e=i.indexOf("["),n=i.indexOf("]");e!=-1&&n!=-1&&(i=i.substring(0,e)+i.substring(e,n).replace(/:/g,";")+i.substring(n,i.length));let r=jt.exec(i||""),s={},o=14;for(;o--;)s[Kt[o]]=r[o]||"";return e!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=$t(s,s.path),s.queryKey=Yt(s,s.query),s}function $t(i,t){let e=/\/{2,9}/g,n=t.replace(e,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Yt(i,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,s){r&&(e[r]=s)}),e}var Ae=typeof addEventListener=="function"&&typeof removeEventListener=="function",me=[];Ae&&addEventListener("offline",()=>{me.forEach(i=>i())},!1);var ge=(()=>{class i extends d{constructor(e,n){if(super(),this.binaryType=_t,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){let r=H(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=H(n.host).host);O(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{let s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bt(this.opts.query)),Ae&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},me.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let n=Object.assign({},this.opts.query);n.EIO=ke,n.transport=e,this.id&&(n.sid=this.id);let r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){let s=this.writeBuffer[r].data;if(s&&(n+=yt(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,T(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let o={type:e,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ae&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=me.indexOf(this._offlineEventListener);r!==-1&&me.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=ke,i})(),_e=class extends ge{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let e=this.createTransport(t),n=!1;ge.priorWebsocketSuccess=!1;let r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",U=>{if(!n)if(U.type==="pong"&&U.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;ge.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(v(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let K=new Error("probe error");K.transport=e.name,this.emitReserved("upgradeError",K)}}))};function s(){n||(n=!0,v(),e.close(),e=null)}let o=U=>{let K=new Error("probe error: "+U);K.transport=e.name,s(),this.emitReserved("upgradeError",K)};function c(){o("transport closed")}function p(){o("socket closed")}function E(U){e&&U.name!==e.name&&s()}let v=()=>{e.removeListener("open",r),e.removeListener("error",o),e.removeListener("close",c),this.off("close",p),this.off("upgrading",E)};e.once("open",r),e.once("error",o),e.once("close",c),this.once("close",p),this.once("upgrading",E),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){let e=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}},z=class extends _e{constructor(t,e={}){let n=typeof t=="object"?t:e;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Oe[r]).filter(r=>!!r)),super(t,n)}};var Ri=z.protocol;function St(i,t="",e){let n=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),n=H(i)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(e&&e.port===n.port?"":":"+n.port),n}var Ne={};Nt(Ne,{Decoder:()=>Me,Encoder:()=>Re,PacketType:()=>h,isPacketValid:()=>sn,protocol:()=>Pt});var Jt=typeof ArrayBuffer=="function",Xt=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Tt=Object.prototype.toString,Gt=typeof Blob=="function"||typeof Blob<"u"&&Tt.call(Blob)==="[object BlobConstructor]",Zt=typeof File=="function"||typeof File<"u"&&Tt.call(File)==="[object FileConstructor]";function ne(i){return Jt&&(i instanceof ArrayBuffer||Xt(i))||Gt&&i instanceof Blob||Zt&&i instanceof File}function te(i,t){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,n=i.length;e<n;e++)if(te(i[e]))return!0;return!1}if(ne(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return te(i.toJSON(),!0);for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&te(i[e]))return!0;return!1}function Ot(i){let t=[],e=i.data,n=i;return n.data=Ue(e,t),n.attachments=t.length,{packet:n,buffers:t}}function Ue(i,t){if(!i)return i;if(ne(i)){let e={_placeholder:!0,num:t.length};return t.push(i),e}else if(Array.isArray(i)){let e=new Array(i.length);for(let n=0;n<i.length;n++)e[n]=Ue(i[n],t);return e}else if(typeof i=="object"&&!(i instanceof Date)){let e={};for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=Ue(i[n],t));return e}return i}function At(i,t){return i.data=Pe(i.data,t),delete i.attachments,i}function Pe(i,t){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<t.length)return t[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=Pe(i[e],t);else if(typeof i=="object")for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=Pe(i[e],t));return i}var Ut=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Pt=5,h=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(h||{}),Re=class{constructor(t){this.replacer=t}encode(t){return(t.type===h.EVENT||t.type===h.ACK)&&te(t)?this.encodeAsBinary({type:t.type===h.EVENT?h.BINARY_EVENT:h.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===h.BINARY_EVENT||t.type===h.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=Ot(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}},Me=class i extends d{constructor(t){super(),this.reviver=t}add(t){let e;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);let n=e.type===h.BINARY_EVENT;n||e.type===h.BINARY_ACK?(e.type=n?h.EVENT:h.ACK,this.reconstructor=new Be(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(ne(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,n={type:Number(t.charAt(0))};if(h[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===h.BINARY_EVENT||n.type===h.BINARY_ACK){let s=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let o=t.substring(s,e);if(o!=Number(o)||t.charAt(e)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(e+1)==="/"){let s=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););n.nsp=t.substring(s,e)}else n.nsp="/";let r=t.charAt(e+1);if(r!==""&&Number(r)==r){let s=e+1;for(;++e;){let o=t.charAt(e);if(o==null||Number(o)!=o){--e;break}if(e===t.length)break}n.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){let s=this.tryParse(t.substr(e));if(i.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,e){switch(t){case h.CONNECT:return ye(e);case h.DISCONNECT:return e===void 0;case h.CONNECT_ERROR:return typeof e=="string"||ye(e);case h.EVENT:case h.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Ut.indexOf(e[0])===-1);case h.ACK:case h.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Be=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=At(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function en(i){return typeof i=="string"}var tn=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i};function nn(i){return i===void 0||tn(i)}function ye(i){return Object.prototype.toString.call(i)==="[object Object]"}function rn(i,t){switch(i){case h.CONNECT:return t===void 0||ye(t);case h.DISCONNECT:return t===void 0;case h.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Ut.indexOf(t[0])===-1);case h.ACK:return Array.isArray(t);case h.CONNECT_ERROR:return typeof t=="string"||ye(t);default:return!1}}function sn(i){return en(i.nsp)&&nn(i.id)&&rn(i.type,i.data)}function b(i,t,e){return i.on(t,e),function(){i.off(t,e)}}var on=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),W=class extends d{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[b(t,"open",this.onopen.bind(this)),b(t,"packet",this.onpacket.bind(this)),b(t,"error",this.onerror.bind(this)),b(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){var n,r,s;if(on.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let o={type:h.EVENT,data:e};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let v=this.ids++,U=e.pop();this._registerAckCallback(v,U),o.id=v}let c=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,p=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!c||(p?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,e){var n;let r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[t]=e;return}let s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);e.call(this,new Error("operation has timed out"))},r),o=(...c)=>{this.io.clearTimeoutFn(s),e.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...e){return new Promise((n,r)=>{let s=(o,c)=>o?r(o):n(c);s.withError=!0,e.push(s),this.emit(t,...e)})}_addToQueue(t){let e;typeof t[t.length-1]=="function"&&(e=t.pop());let n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((r,...s)=>(this._queue[0],r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(r)):(this._queue.shift(),e&&e(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:h.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){let n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case h.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case h.EVENT:case h.BINARY_EVENT:this.onevent(t);break;case h.ACK:case h.BINARY_ACK:this.onack(t);break;case h.DISCONNECT:this.ondisconnect();break;case h.CONNECT_ERROR:this.destroy();let n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let e=this,n=!1;return function(...r){n||(n=!0,e.packet({type:h.ACK,id:t,data:r}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(delete this.acks[t.id],e.withError&&t.data.unshift(null),e.apply(this,t.data))}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:h.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let n of e)n.apply(this,t.data)}}};function L(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}L.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*i);i=Math.floor(t*10)&1?i+e:i-e}return Math.min(i,this.max)|0};L.prototype.reset=function(){this.attempts=0};L.prototype.setMin=function(i){this.ms=i};L.prototype.setMax=function(i){this.max=i};L.prototype.setJitter=function(i){this.jitter=i};var j=class extends d{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,O(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((n=e.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new L({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let r=e.parser||Ne;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new z(this.uri,this.opts);let e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;let r=b(e,"open",function(){n.onopen(),t&&t()}),s=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=b(e,"error",s);if(this._timeout!==!1){let c=this._timeout,p=this.setTimeoutFn(()=>{r(),s(new Error("timeout")),e.close()},c);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(r),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(b(t,"ping",this.onping.bind(this)),b(t,"data",this.ondata.bind(this)),b(t,"error",this.onerror.bind(this)),b(t,"close",this.onclose.bind(this)),b(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(e){this.onclose("parse error",e)}}ondecoded(t){T(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new W(this,t,e),this.nsps[t]=n),n}_destroy(t){let e=Object.keys(this.nsps);for(let n of e)if(this.nsps[n].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,e){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ie={};function re(i,t){typeof i=="object"&&(t=i,i=void 0),t=t||{};let e=St(i,t.path||"/socket.io"),n=e.source,r=e.id,s=e.path,o=ie[r]&&s in ie[r].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o,p;return c?p=new j(n,t):(ie[r]||(ie[r]=new j(n,t)),p=ie[r]),e.query&&!t.query&&(t.query=e.queryKey),p.socket(e.path,t)}Object.assign(re,{Manager:j,Socket:W,io:re,connect:re});var Mt=(()=>{class i{socket=null;onlineUsersSubject=new Ve([]);onlineUsers$=this.onlineUsersSubject.asObservable();constructor(){}connect(e){this.socket?.connected||(this.socket=re(D.socketUrl,{transports:["websocket","polling"],autoConnect:!0}),this.socket.on("connect",()=>{console.log("Socket connected:",this.socket?.id),this.socket?.emit("join-user",e)}),this.socket.on("online-users",n=>{this.onlineUsersSubject.next(n)}),this.socket.on("user-status-change",n=>{let r=this.onlineUsersSubject.value;n.isOnline?r.includes(n.userId)||this.onlineUsersSubject.next([...r,n.userId]):this.onlineUsersSubject.next(r.filter(s=>s!==n.userId))}),this.socket.on("disconnect",()=>{console.log("Socket disconnected")}))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}sendMessage(e){this.socket?.emit("send-message",e)}onMessageSent(){return new V(e=>{this.socket?.on("message-sent",n=>{e.next(n)})})}onReceiveMessage(){return new V(e=>{this.socket?.on("receive-message",n=>{e.next(n)})})}sendTyping(e){this.socket?.emit("typing",e)}onUserTyping(){return new V(e=>{this.socket?.on("user-typing",n=>{e.next(n)})})}markMessagesSeen(e,n,r){this.socket?.emit("message-seen",{messageIds:e,senderId:n,seenBy:r})}onMessagesSeen(){return new V(e=>{this.socket?.on("messages-seen",n=>{e.next(n)})})}onMessageDelivered(){return new V(e=>{this.socket?.on("message-delivered",n=>{e.next(n)})})}isUserOnline(e){return this.onlineUsersSubject.value.includes(e)}isConnected(){return!!this.socket?.connected}static \u0275fac=function(n){return new(n||i)};static \u0275prov=se({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Bt=(()=>{class i{http;apiUrl=D.apiUrl;constructor(e){this.http=e}getUsers(){return this.http.get(`${this.apiUrl}/users`)}getUserById(e){return this.http.get(`${this.apiUrl}/users/${e}`)}getMessages(e){return this.http.get(`${this.apiUrl}/messages/${e}`)}markMessagesAsRead(e){return this.http.put(`${this.apiUrl}/messages/read/${e}`,{})}getUnreadCount(){return this.http.get(`${this.apiUrl}/messages/unread/count`)}static \u0275fac=function(n){return new(n||i)(qe(Je))};static \u0275prov=se({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var hn=["messagesContainer"];function ln(i,t){if(i&1&&(a(0,"div",31),g(1),l()),i&2){let e,n=m();u(),Y(" ",n.currentUser==null||n.currentUser.username==null||(e=n.currentUser.username.charAt(0))==null?null:e.toUpperCase()," ")}}function un(i,t){if(i&1){let e=I();a(0,"img",32),w("error",function(){y(e);let r=m();return x(r.onAvatarError())}),l()}if(i&2){let e=m();Fe("alt",e.currentUser==null?null:e.currentUser.username),f("src",e.getAvatarUrl(e.currentUser==null?null:e.currentUser.avatar),oe)}}function pn(i,t){if(i&1&&(ae(0),g(1),ce()),i&2){let e=m().$implicit;u(),Y(" ",e.username.charAt(0).toUpperCase()," ")}}function dn(i,t){if(i&1){let e=I();a(0,"img",40),w("error",function(){y(e);let r=m().$implicit;return x(r.avatar=void 0)}),l()}if(i&2){let e=m().$implicit,n=m();f("src",n.getAvatarUrl(e.avatar),oe)}}function fn(i,t){if(i&1){let e=I();a(0,"div",33),w("click",function(){let r=y(e).$implicit,s=m();return x(s.selectUser(r))}),a(1,"div",34),k(2,pn,2,1,"ng-container",30)(3,dn,1,1,"img",35),S(4,"span",36),l(),a(5,"div",37)(6,"div",38),g(7),l(),a(8,"div",39),g(9),l()()()}if(i&2){let e=t.$implicit,n=m();N("active",(n.selectedUser==null?null:n.selectedUser._id)===e._id),u(2),f("ngIf",!e.avatar),u(),f("ngIf",e.avatar),u(),N("online",n.isUserOnline(e._id)),u(3),P(e.username),u(2),P(n.isUserOnline(e._id)?"Online":"Offline")}}function mn(i,t){i&1&&(a(0,"div",41)(1,"p"),g(2,"No users found"),l(),a(3,"small"),g(4,"Invite friends to chat!"),l()())}function gn(i,t){i&1&&(a(0,"div",42)(1,"div",43),B(),a(2,"svg",44),S(3,"path",45)(4,"path",46),l(),q(),a(5,"h2"),g(6,"ChatApp Web"),l(),a(7,"p"),g(8,"Select a chat to start messaging"),l()()())}function _n(i,t){if(i&1&&(ae(0),g(1),ce()),i&2){let e=m(2);u(),Y(" ",e.selectedUser.username.charAt(0).toUpperCase()," ")}}function yn(i,t){if(i&1){let e=I();a(0,"img",40),w("error",function(){y(e);let r=m(2);return x(r.selectedUser.avatar=void 0)}),l()}if(i&2){let e=m(2);f("src",e.getAvatarUrl(e.selectedUser.avatar),oe)}}function xn(i,t){i&1&&(a(0,"span",65),g(1,"typing..."),l())}function bn(i,t){if(i&1&&(a(0,"span"),g(1),l()),i&2){let e=m(2);u(),P(e.isUserOnline(e.selectedUser._id)?"Online":"Last seen recently")}}function vn(i,t){i&1&&(a(0,"span",76),g(1,"\u2713\u2713"),l())}function wn(i,t){i&1&&(a(0,"span",77),g(1,"\u2713\u2713"),l())}function Cn(i,t){i&1&&(a(0,"span",78),g(1,"\u2713"),l())}function kn(i,t){if(i&1&&(a(0,"span",72),k(1,vn,2,0,"span",73)(2,wn,2,0,"span",74)(3,Cn,2,0,"span",75),l()),i&2){let e=m().$implicit;u(),f("ngIf",e.seen),u(),f("ngIf",!e.seen&&e.delivered),u(),f("ngIf",!e.seen&&!e.delivered)}}function En(i,t){if(i&1&&(a(0,"div",66)(1,"div",67)(2,"p",68),g(3),l(),a(4,"div",69)(5,"span",70),g(6),l(),k(7,kn,4,3,"span",71),l()()()),i&2){let e=t.$implicit,n=m(2);N("sent",e.sender._id===(n.currentUser==null?null:n.currentUser._id))("received",e.sender._id!==(n.currentUser==null?null:n.currentUser._id)),u(3),P(e.content),u(3),P(n.formatTime(e.createdAt)),u(),f("ngIf",e.sender._id===(n.currentUser==null?null:n.currentUser._id))}}function Sn(i,t){if(i&1&&(a(0,"div",79)(1,"p"),g(2,"No messages yet"),l(),a(3,"small"),g(4),l()()),i&2){let e=m(2);u(4),Y("Say hi to ",e.selectedUser.username,"! \u{1F44B}")}}function Tn(i,t){if(i&1){let e=I();ae(0),a(1,"div",47)(2,"button",48),w("click",function(){y(e);let r=m();return x(r.deselectUser())}),B(),a(3,"svg",49),S(4,"path",50),l()(),q(),a(5,"div",51),k(6,_n,2,1,"ng-container",30)(7,yn,1,1,"img",35),S(8,"span",36),l(),a(9,"div",52)(10,"div",53),g(11),l(),a(12,"div",54),k(13,xn,2,0,"span",55)(14,bn,2,1,"span",30),l()()(),a(15,"div",56,1),k(17,En,8,7,"div",57)(18,Sn,5,1,"div",58),l(),a(19,"div",59)(20,"input",60),ve("ngModelChange",function(r){y(e);let s=m();return be(s.newMessage,r)||(s.newMessage=r),x(r)}),w("keyup.enter",function(){y(e);let r=m();return x(r.sendMessage())})("input",function(){y(e);let r=m();return x(r.onTyping())}),l(),a(21,"button",61),w("click",function(){y(e);let r=m();return x(r.sendMessage())}),B(),a(22,"svg",62),S(23,"path",63)(24,"path",64),l()()(),ce()}if(i&2){let e=m();u(6),f("ngIf",!e.selectedUser.avatar),u(),f("ngIf",e.selectedUser.avatar),u(),N("online",e.isUserOnline(e.selectedUser._id)),u(3),P(e.selectedUser.username),u(2),f("ngIf",e.typingUsers[e.selectedUser._id]),u(),f("ngIf",!e.typingUsers[e.selectedUser._id]),u(3),f("ngForOf",e.messages),u(),f("ngIf",e.messages.length===0),u(2),xe("ngModel",e.newMessage),u(),f("disabled",!e.newMessage.trim())}}var Ur=(()=>{class i{authService;socketService;chatService;router;messagesContainer;currentUser=null;users=[];selectedUser=null;messages=[];newMessage="";searchQuery="";typingUsers={};typingTimeout;subscriptions=[];shouldScrollToBottom=!1;constructor(e,n,r,s){this.authService=e,this.socketService=n,this.chatService=r,this.router=s}ngOnInit(){this.subscriptions.push(this.authService.currentUser$.subscribe(e=>{this.currentUser=e,e&&!this.socketService.isConnected()&&(this.socketService.connect(e._id),this.loadUsers(),this.setupSocketListeners())}))}ngAfterViewChecked(){this.shouldScrollToBottom&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.socketService.disconnect()}get filteredUsers(){return this.searchQuery?this.users.filter(e=>e.username.toLowerCase().includes(this.searchQuery.toLowerCase())):this.users}loadUsers(){this.chatService.getUsers().subscribe({next:e=>this.users=e,error:e=>console.error("Failed to load users:",e)})}selectUser(e){this.selectedUser=e,this.loadMessages(e._id),this.markMessagesAsRead(e._id)}loadMessages(e){this.chatService.getMessages(e).subscribe({next:n=>{this.messages=n,this.shouldScrollToBottom=!0},error:n=>console.error("Failed to load messages:",n)})}setupSocketListeners(){this.subscriptions.push(this.socketService.onMessageSent().subscribe(e=>{this.selectedUser&&(e.receiver._id===this.selectedUser._id||e.sender._id===this.selectedUser._id)&&(this.messages.push(e),this.shouldScrollToBottom=!0)}),this.socketService.onReceiveMessage().subscribe(e=>{this.selectedUser&&e.sender._id===this.selectedUser._id&&(this.messages.push(e),this.shouldScrollToBottom=!0,this.markMessagesAsRead(e.sender._id),this.socketService.markMessagesSeen([e._id],e.sender._id,this.currentUser._id))}),this.socketService.onUserTyping().subscribe(e=>this.typingUsers[e.userId]=e.isTyping),this.socketService.onMessagesSeen().subscribe(e=>{this.messages.forEach(n=>{e.messageIds.includes(n._id)&&(n.seen=!0,n.seenAt=e.seenAt)})}),this.socketService.onMessageDelivered().subscribe(e=>{let n=this.messages.find(r=>r._id===e.messageId);n&&(n.delivered=!0,n.deliveredAt=e.deliveredAt)}))}sendMessage(){!this.newMessage.trim()||!this.selectedUser||!this.currentUser||(this.socketService.sendMessage({senderId:this.currentUser._id,receiverId:this.selectedUser._id,content:this.newMessage.trim()}),this.newMessage="",this.socketService.sendTyping({senderId:this.currentUser._id,receiverId:this.selectedUser._id,isTyping:!1}))}onTyping(){!this.selectedUser||!this.currentUser||(this.typingTimeout&&clearTimeout(this.typingTimeout),this.socketService.sendTyping({senderId:this.currentUser._id,receiverId:this.selectedUser._id,isTyping:!0}),this.typingTimeout=setTimeout(()=>{this.socketService.sendTyping({senderId:this.currentUser._id,receiverId:this.selectedUser._id,isTyping:!1})},2e3))}markMessagesAsRead(e){this.chatService.markMessagesAsRead(e).subscribe()}isUserOnline(e){return this.socketService.isUserOnline(e)}formatTime(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}getAvatarUrl(e){return e?e.startsWith("http")?e:`${D.socketUrl}/${e}`:""}scrollToBottom(){try{this.messagesContainer&&(this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight)}catch{}}onFileSelected(e){let n=e.target.files[0];n&&(console.log("Uploading file:",n.name),this.authService.uploadAvatar(n).subscribe({next:r=>{console.log("Avatar upload response:",r),this.currentUser=Le(Ie({},this.currentUser),{avatar:r.avatar})},error:r=>{console.error("Avatar upload failed:",r),alert("Failed to upload avatar: "+(r.error?.message||r.message))}}))}onLogout(){this.authService.logout().subscribe({next:()=>{this.socketService.disconnect(),this.router.navigate(["/login"])},error:()=>{localStorage.clear(),this.router.navigate(["/login"])}})}onAvatarError(){this.currentUser&&(this.currentUser.avatar=void 0)}deselectUser(){this.selectedUser=null}static \u0275fac=function(n){return new(n||i)($(Ge),$(Mt),$(Bt),$(Xe))};static \u0275cmp=De({type:i,selectors:[["app-chat"]],viewQuery:function(n,r){if(n&1&&He(hn,5),n&2){let s;ze(s=We())&&(r.messagesContainer=s.first)}},standalone:!0,features:[Ke],decls:31,vars:12,consts:[["fileInput",""],["messagesContainer",""],[1,"chat-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"user-info"],["type","file","accept","image/*",2,"display","none",3,"change"],["title","Change Profile Picture",1,"avatar-container",3,"click"],["class","avatar",4,"ngIf"],["class","avatar-img",3,"src","alt","error",4,"ngIf"],[1,"edit-overlay"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],[1,"username"],["title","Logout",1,"logout-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16,17 21,12 16,7"],["x1","21","y1","12","x2","9","y2","12"],[1,"search-box"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search or start new chat",3,"ngModelChange","ngModel"],[1,"users-list"],["class","user-item",3,"active","click",4,"ngFor","ngForOf"],["class","no-users",4,"ngIf"],[1,"chat-area"],["class","no-chat",4,"ngIf"],[4,"ngIf"],[1,"avatar"],[1,"avatar-img",3,"error","src","alt"],[1,"user-item",3,"click"],[1,"user-avatar"],["class","avatar-img","style","width: 100%; height: 100%; border-radius: 50%; object-fit: cover;",3,"src","error",4,"ngIf"],[1,"status-dot"],[1,"user-details"],[1,"user-name"],[1,"user-status"],[1,"avatar-img",2,"width","100%","height","100%","border-radius","50%","object-fit","cover",3,"error","src"],[1,"no-users"],[1,"no-chat"],[1,"no-chat-content"],["width","100","height","100","viewBox","0 0 39 39"],["fill","#00a884","d","M10.7 32.8l.6.3c2.5 1.5 5.3 2.2 8.1 2.2 8.8 0 16-7.2 16-16 0-4.2-1.7-8.3-4.7-11.3s-7-4.7-11.3-4.7c-8.8 0-16 7.2-15.9 16.1 0 3 .9 5.9 2.4 8.4l.4.6-1.6 5.9 6-1.5z"],["fill","#fff","d","M32.4 6.4C29 2.9 24.3 1 19.5 1 9.3 1 1.1 9.3 1.2 19.4c0 3.2.9 6.3 2.4 9.1L1 38l9.7-2.5c2.7 1.5 5.7 2.2 8.7 2.2 10.1 0 18.3-8.3 18.3-18.4 0-4.9-1.9-9.5-5.3-12.9z"],[1,"chat-header"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","m15 18-6-6 6-6"],[1,"chat-user-avatar"],[1,"chat-user-info"],[1,"chat-user-name"],[1,"chat-user-status"],["class","typing-indicator",4,"ngIf"],[1,"messages-container"],["class","message",3,"sent","received",4,"ngFor","ngForOf"],["class","no-messages",4,"ngIf"],[1,"message-input-container"],["type","text","placeholder","Type a message",3,"ngModelChange","keyup.enter","input","ngModel"],[1,"send-btn",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M22 2L11 13","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 2L15 22L11 13L2 9L22 2Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"typing-indicator"],[1,"message"],[1,"message-bubble"],[1,"message-text"],[1,"message-meta"],[1,"message-time"],["class","message-status",4,"ngIf"],[1,"message-status"],["class","tick seen",4,"ngIf"],["class","tick delivered",4,"ngIf"],["class","tick",4,"ngIf"],[1,"tick","seen"],[1,"tick","delivered"],[1,"tick"],[1,"no-messages"]],template:function(n,r){if(n&1){let s=I();a(0,"div",2)(1,"aside",3)(2,"div",4)(3,"div",5)(4,"input",6,0),w("change",function(c){return y(s),x(r.onFileSelected(c))}),l(),a(6,"div",7),w("click",function(){y(s);let c=je(5);return x(c.click())}),k(7,ln,2,1,"div",8)(8,un,1,2,"img",9),a(9,"div",10),B(),a(10,"svg",11),S(11,"path",12)(12,"circle",13),l()()(),q(),a(13,"span",14),g(14),l()(),a(15,"button",15),w("click",function(){return y(s),x(r.onLogout())}),B(),a(16,"svg",16),S(17,"path",17)(18,"polyline",18)(19,"line",19),l()()(),q(),a(20,"div",20),B(),a(21,"svg",21),S(22,"circle",22)(23,"path",23),l(),q(),a(24,"input",24),ve("ngModelChange",function(c){return y(s),be(r.searchQuery,c)||(r.searchQuery=c),x(c)}),l()(),a(25,"div",25),k(26,fn,10,8,"div",26)(27,mn,5,0,"div",27),l()(),a(28,"main",28),k(29,gn,9,0,"div",29)(30,Tn,25,11,"ng-container",30),l()()}n&2&&(u(),N("mobile-hidden",r.selectedUser),u(6),f("ngIf",!(r.currentUser!=null&&r.currentUser.avatar)),u(),f("ngIf",r.currentUser==null?null:r.currentUser.avatar),u(6),P(r.currentUser==null?null:r.currentUser.username),u(10),xe("ngModel",r.searchQuery),u(2),f("ngForOf",r.filteredUsers),u(),f("ngIf",r.users.length===0),u(),N("mobile-show",r.selectedUser),u(),f("ngIf",!r.selectedUser),u(),f("ngIf",r.selectedUser))},dependencies:[Qe,$e,Ye,nt,Ze,et,tt],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;height:100vh;background:transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:380px;background:#0f172a66;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-right:1px solid var(--border-glass);display:flex;flex-direction:column;z-index:2}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px;background:transparent}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.avatar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;width:42px;height:42px}.avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;background:var(--primary-green);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px;box-shadow:none;position:relative;overflow:hidden;transition:transform .3s var(--ease-smooth)}.avatar-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;display:block}.edit-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease;color:#fff}.avatar-container[_ngcontent-%COMP%]:hover   .edit-overlay[_ngcontent-%COMP%]{opacity:1}.username[_ngcontent-%COMP%]{font-weight:700;font-size:16px;color:var(--text-primary);text-shadow:0 2px 10px rgba(0,0,0,.5)}.logout-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:var(--text-secondary);transition:all .2s;background:#ffffff0d}.logout-btn[_ngcontent-%COMP%]:hover{background:#ef444433;color:#fca5a5;transform:rotate(90deg)}.search-box[_ngcontent-%COMP%]{margin:0 20px 20px;display:flex;align-items:center;background:#0f172a99;border:1px solid var(--border-glass);border-radius:12px;padding:2px 16px;transition:all .3s}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:0 0 0 2px #00d2ad33}.search-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-secondary)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent!important;border:none!important;box-shadow:none!important;padding:12px;font-size:14px}.users-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:0 12px}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:16px;cursor:pointer;transition:all .2s var(--ease-smooth);margin-bottom:4px;border:1px solid transparent}.user-item[_ngcontent-%COMP%]:hover{background:#ffffff0d}.user-item.active[_ngcontent-%COMP%]{background:#00d2ad1a;border-color:#00d2ad4d}.user-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:18px;position:relative;box-shadow:0 4px 10px #0003;flex-shrink:0}.status-dot[_ngcontent-%COMP%]{position:absolute;bottom:-2px;right:-2px;width:14px;height:14px;border-radius:50%;background:var(--offline);border:3px solid #1e293b}.status-dot.online[_ngcontent-%COMP%]{background:var(--online);box-shadow:0 0 8px var(--online)}.user-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);margin-bottom:2px}.user-status[_ngcontent-%COMP%]{font-size:13px;color:var(--text-secondary)}.user-item.active[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:var(--primary-color)}.chat-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background:#0f172a33;position:relative}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 32px;background:#0f172ab3;backdrop-filter:blur(20px);border-bottom:1px solid var(--border-glass);z-index:10}.chat-user-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:14px;background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:18px;position:relative;flex-shrink:0}.chat-user-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.typing-indicator[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:500;font-size:13px;animation:pulse 1.5s infinite}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:30px 60px;display:flex;flex-direction:column;gap:16px}.message[_ngcontent-%COMP%]{display:flex;width:100%}.message.sent[_ngcontent-%COMP%]{justify-content:flex-end}.message.received[_ngcontent-%COMP%]{justify-content:flex-start}.message-bubble[_ngcontent-%COMP%]{max-width:60%;padding:12px 20px;border-radius:20px;position:relative;box-shadow:0 4px 15px #0000001a;backdrop-filter:blur(10px)}.message.sent[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00d2adcc,#009b85e6);color:#fff;border-bottom-right-radius:4px;border:1px solid rgba(255,255,255,.1)}.message.received[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#334155b3;color:var(--text-primary);border-bottom-left-radius:4px;border:1px solid var(--border-glass)}.message-text[_ngcontent-%COMP%]{font-size:15px;line-height:1.5;margin-bottom:4px}.message-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:6px;font-size:11px;opacity:.8}.tick[_ngcontent-%COMP%]{font-size:14px}.tick.seen[_ngcontent-%COMP%]{color:#84cc16}.message-input-container[_ngcontent-%COMP%]{padding:24px 32px;background:#0f172ab3;backdrop-filter:blur(20px);border-top:1px solid var(--border-glass);display:flex;gap:16px;align-items:center}.message-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;background:#1e293b80!important;border:1px solid var(--border-glass)!important;border-radius:16px;padding:16px 24px;font-size:15px;color:#fff;backdrop-filter:none}.message-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#1e293bcc!important;border-color:var(--primary-color)!important}.send-btn[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:16px;background:var(--primary-gradient);color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #00d2ad4d;transition:all .3s var(--ease-elastic)}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1) rotate(-10deg);box-shadow:0 8px 25px #00d2ad80}.send-btn[_ngcontent-%COMP%]:disabled{filter:grayscale(1);opacity:.5;cursor:not-allowed}.no-chat[_ngcontent-%COMP%]{background:transparent;display:flex;align-items:center;justify-content:center}.no-chat-content[_ngcontent-%COMP%]{background:#0f172a99;backdrop-filter:blur(20px);padding:60px;margin-top:18%;border-radius:30px;border:1px solid var(--border-glass);text-align:center;box-shadow:0 20px 50px #0000004d}.no-chat-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:20px;font-size:32px;background:var(--primary-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100%;position:absolute;height:100%;background:#0f172a}.sidebar.mobile-hidden[_ngcontent-%COMP%]{display:none}.chat-area.mobile-show[_ngcontent-%COMP%]{display:flex;z-index:5;background:#0f172a}.messages-container[_ngcontent-%COMP%]{padding:20px}.message-bubble[_ngcontent-%COMP%]{max-width:80%}}"]})}return i})();export{Ur as ChatComponent};
